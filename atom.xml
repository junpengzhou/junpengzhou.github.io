<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>AlphaDog</title>
  
  <subtitle>Junpengzhou&#39;s Blog, Welcome!</subtitle>
  <link href="https://www.junpengzhou.top/atom.xml" rel="self"/>
  
  <link href="https://www.junpengzhou.top/"/>
  <updated>2024-08-14T04:18:18.605Z</updated>
  <id>https://www.junpengzhou.top/</id>
  
  <author>
    <name>Junpengzhou</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Spring框架结构与学习重点</title>
    <link href="https://www.junpengzhou.top/article/6b8e949c.html"/>
    <id>https://www.junpengzhou.top/article/6b8e949c.html</id>
    <published>2024-08-13T03:15:40.000Z</published>
    <updated>2024-08-14T04:18:18.605Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一spring框架学习路线图">一、Spring框架学习路线图</h1><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/spring%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE.png" alt="spring框架学习总结思维导图"></p><h1 id="二什么是spring-">二、什么是Spring ?</h1><blockquote><p>Spring 是一个开源框架，Spring是于2003 年兴起的一个轻量级的Java开发框架，由 Rod Johnson 在其著作 Expert One-On-One J2EE Development andDesign中阐述的部分理念和原型衍生而来。它是为了解决企业应用开发的复杂性而创建的。框架的主要优势之一就是其分层架构，分层架构允许使用者选择使用哪一个组件，同时为J2EE 应用程序开发提供集成的框架。Spring 使用基本的 JavaBean来完成以前只可能由 EJB 完成的事情。</p></blockquote><p>然而，Spring的用途不仅限于服务器端的开发。从简单性、可测试性和松耦合的角度而言，任何Java应用都可以从Spring中受益。<strong>Spring的核心是控制反转（IoC）和面向切面（AOP）</strong>。简单来说，Spring是一个分层的 <code>JavaSE/EE full-stack</code>(一站式)<code>轻量级</code>开源框架。</p><p>简单来说，Spring是一个轻量级的控制反转(IoC)和面向切面(AOP)的容器框架。</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/spring-overview.png" alt="spring-overview"></p><h1 id="三spring-框架组件">三、Spring 框架组件</h1><table><thead><tr class="header"><th>GroupId</th><th>ArtifactId</th><th>Description</th></tr></thead><tbody><tr class="odd"><td>org.springframework</td><td>spring-aop</td><td>Proxy-based AOP support 基于代理的 AOP 支持</td></tr><tr class="even"><td>org.springframework</td><td>spring-aspects</td><td>AspectJ based aspects 基于 AspectJ 的切面</td></tr><tr class="odd"><td>org.springframework</td><td>spring-beans</td><td>Beans support, including Groovy Bean 支持，包括 Groovy</td></tr><tr class="even"><td>org.springframework</td><td>spring-context</td><td>Application context runtime, including scheduling and remotingabstractions 应用程序上下文运行时，包括调度和远程抽象</td></tr><tr class="odd"><td>org.springframework</td><td>spring-context-support</td><td>Support classes for integrating common third-party libraries into aSpring application context 支持将常见的第三方库集成到 Spring应用程序上下文中的类</td></tr><tr class="even"><td>org.springframework</td><td>spring-core</td><td>Core utilities, used by many other Spring modules核心应用程序，由许多其他 Spring 模块使用</td></tr><tr class="odd"><td>org.springframework</td><td>spring-expression</td><td>Spring Expression Language (SpEL)，提供 spel表达式支持，支持设置和获取属性值,属性赋值,方法调用,访问数组的内容,集合和索引器,逻辑和算术运算符,命名变量,以及通过 Spring IoC 容器中的名称检索对象。它还支持列表投影和选择以及公共列表聚合</td></tr><tr class="even"><td>org.springframework</td><td>spring-instrument</td><td>Instrumentation agent for JVM bootstrapping JVM 引导的工具代理</td></tr><tr class="odd"><td>org.springframework</td><td>spring-instrument-tomcat</td><td>Instrumentation agent for Tomcat Tomcat 的工具代理</td></tr><tr class="even"><td>org.springframework</td><td>spring-jdbc</td><td>JDBC support package, including DataSource setup and JDBC accesssupport JDBC 支持包，包括 DataSource 设置和 JDBC访问支持，模块提供了一个 JDBC 抽象层，消除了对繁琐的 JDBC编码和解析数据库供应商特定的错误代码的需要</td></tr><tr class="odd"><td>org.springframework</td><td>spring-jms</td><td>JMS support package, including helper classes to send and receiveJMS messages JMS 支持包，包括用于发送和接收 JMS 消息的助手类，模块（Java消息服务）包含用于生成和使用消息的功能。从 Spring Framework 4.1开始，它提供了与 spring-messaging 模块的集成</td></tr><tr class="even"><td>org.springframework</td><td>spring-messaging</td><td>Support for messaging architectures and protocols支持消息架构和协议</td></tr><tr class="odd"><td>org.springframework</td><td>spring-orm</td><td>Object/Relational Mapping, including JPA and Hibernate support对象/关系映射，包括 JPA 和 Hibernate 与MyBatis支持，模块为流行的对象关系映射 API 提供集成层，包括 JPA 和Hibernate。使用 spring-orm 模块，您可以使用这些 O / R 映射框架结合Spring 提供的所有其他功能，例如前面提到的简单声明式事务管理功能</td></tr><tr class="even"><td>org.springframework</td><td>spring-oxm</td><td>Object/XML Mapping 对象/ XML 映射</td></tr><tr class="odd"><td>org.springframework</td><td>spring-test</td><td>Support for unit testing and integration testing Spring components支持单元测试和集成测试的 Spring组件,模块支持使用<code>JUnit</code>或<code>TestNG</code>对<code>Spring</code>组件进行单元测试和集成测试。它提供了<code>SpringApplicationContexts</code>的一致加载和这些上下文的缓存。它还提供了<a href="http://docs.spring.io/spring/docs/5.0.0.M4/spring-framework-reference/htmlsingle/#mock-objects">mockobjects</a>(模拟对象)，您可以使用它来单独测试您的代码</td></tr><tr class="even"><td>org.springframework</td><td>spring-tx</td><td>Transaction infrastructure, including DAO support and JCAintegration 事务基础设施，包括 DAO支持和集成制定，模块支持实现特殊接口的类以及所有 POJO（普通 Java对象）的编程和声明事务管理</td></tr><tr class="odd"><td>org.springframework</td><td>spring-web</td><td>Web support packages, including client and web remoting Web支持包，包括客户端和 Web 远程处理，模块提供基本的面向 Web的集成功能，例如多部分文件上传功能和使用 Servlet 侦听器和面向 Web的应用程序上下文来初始化 IoC 容器。 它还包含一个 HTTP 客户端和 Web的相关部分的 Spring 的远程支持</td></tr><tr class="even"><td>org.springframework</td><td>spring-webmvc</td><td>REST Web Services and model-view-controller implementation for webapplications Web 应用程序的 REST Web 服务和模型 - 视图 -控制器实现，模块（也称为 Web-Servlet 模块）包含用于 Web 应用程序的Spring 的模型视图控制器（MVC）和 REST Web 服务实现。 Spring 的 MVC框架提供了 domain model（领域模型）代码和 Web表单之间的清晰分离，并且集成了 Spring Framework 所有的其他功能</td></tr><tr class="odd"><td>org.springframework</td><td>spring-websocket</td><td>WebSocket and SockJS implementations, including STOMP supportWebSocket 和 SockJS 实现，包括 STOMP 支持</td></tr></tbody></table><h1 id="四核心组件说明">四、核心组件说明</h1><ul><li><strong>Spring Core</strong>：Spring核心模块，主要提供 ioC依赖注入、</li><li><strong>Spring Context</strong>：向Spring框架提供上下文信息、</li><li><strong>Spring AOP</strong>：面向切面编程，为基于 Spring的应用程序中的对象提供了事务管理服务、</li><li><strong>Spring JDBC</strong>：Java数据库连接、</li><li><strong>Spring JMS</strong>：Java消息服务、</li><li><strong>Spring ORM</strong>：用于支持 MyBatis、Hibernate 等 ORM工具、</li><li><strong>Spring Web</strong>：为创建Web应用程序提供支持、</li><li><strong>Spring Test</strong>：提供了对 JUnit 和 TestNG测试的支持、</li><li><strong>SpringAspects</strong>：该模块为与AspectJ的集成提供支持。</li><li><strong>SpringWeb</strong>：Spring框架支持与Struts集成，为基于web的应用程序提供了上下文。</li></ul><h1 id="五spring的优点">五、Spring的优点</h1><ul><li><strong>方便解耦，简化开发 （高内聚低耦合）</strong></li></ul><p>Spring就是一个大工厂（容器），可以将所有对象创建和依赖关系维护，交给Spring管理，spring工厂是用于生成bean</p><ul><li><strong>AOP编程的支持</strong></li></ul><p>Spring提供面向切面编程，可以方便的实现对程序进行权限拦截、运行监控等功能</p><ul><li><strong>声明式事务的支持</strong></li></ul><p>只需要通过配置就可以完成对事务的管理，而无需手动编程</p><ul><li><strong>方便程序的测试</strong></li></ul><p>Spring对Junit4支持，可以通过注解方便的测试Spring程序</p><ul><li><strong>方便集成各种优秀框架</strong></li></ul><p>Spring不排斥各种优秀的开源框架，其内部提供了对各种优秀框架（如：Struts、Hibernate、MyBatis、Quartz等）的直接支持</p><ul><li><strong>降低JavaEE API的使用难度</strong></li></ul><p>Spring 对 JavaEE 开发中非常难用的一些API（JDBC、JavaMail、远程调用等），都提供了封装，使这些 API应用难度大大降低</p><h1 id="六iocinversion-of-control控制反转">六、IoC（Inversion ofControl）控制反转</h1><p>了解Ioc之前，先了解一下<code>DI（Dependency Injection）</code>(依赖注入)</p><p><code>IoC</code> 需要<code>DI</code>(依赖注入)的支持为什么呢？因为没有 DI 的注入 Spring创造出的对象都是空值是无法使用的,所以说 <code>IoC</code> 和<code>DI</code> 多数是同时出现人们眼前的。</p><p><code>IOC</code> 是 <code>Inversion of Control</code>的缩写，多数书籍翻译成“控制反转”。<strong>为了解决对象之间的耦合度过高的问题</strong>，软件专家Michael Mattson 提出了 IOC理论，用来实现对象之间的<strong>解耦</strong>。</p><p>“获得依赖对象的过程被反转了”。控制被反转之后，获得依赖对象的过程由自身管理变为了由IOC容器主动注入。于是，他给“控制反转”取了一个更合适的名字叫做“依赖注入（DependencyInjection）”。他的这个答案，实际上给出了实现 IOC的方法：注入。所谓依赖注入，就是由IOC容器在运行期间，动态地将某种依赖关系注入到对象之中。</p><p><code>DI</code>可以被认为是一种Ioc容器构想的实现方法，依赖注入(DI)和控制反转(IOC)是从不同的角度的描述的同一件事情，就是指<strong>通过引入IOC 容器，利用依赖关系注入的方式，实现对象之间的解耦。</strong></p><p><strong>将原本在程序中自己手动创建对象的控制权，交由 Spring框架来管理</strong>。Spring框架负责控制对象的<strong>生命周期</strong>和<strong>对象之间的关系</strong>。IoC在其他语言中也有应用，并非 Spirng 特有。<strong>ioc 容器实际上就是个map（key，value），里面存的是各种对象</strong>（在xml里配置的bean节点||repository、service、controller、component）。</p><p><strong>Spring IOC容器就像是一个工厂一样，当我们需要创建一个对象的时候，只需要配置好配置文件/注解即可，完全不用考虑对象是如何被创建出来的。</strong>IOC容器负责创建对象，将对象连接在一起，配置这些对象，并从创建中处理这些对象的整个生命周期，直到它们被完全销毁。</p><p>在实际项目中一个 Service类如果有几百甚至上千个类作为它的底层，我们需要实例化这个Service，你可能要每次都要搞清这个 Service所有底层类的构造函数，这可能会把人逼疯。如果利用 IOC的话，你只需要配置好，然后在需要的地方引用就行了，这大大增加了项目的可维护性且降低了开发难度。</p><p><strong>IoC容器的初始化过程可以分为三步：</strong></p><ol type="1"><li>Resource 定位（Bean的定义文件定位）</li><li>将 Resource 定位好的资源载入到 BeanDefinition</li><li>将 BeanDefiniton 注册到容器中</li></ol><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20240813144751993.png" alt="image-20240813144751993"></p><p>详见：<a href="https://javadoop.com/post/spring-ioc">SpringIoc源码分析</a></p><h1 id="七aopaspect-orientedprogramming面向切面编程">七、AOP（Aspect-OrientedProgramming）面向切面编程</h1><p>AOP（Aspect Oriented Programming面向切面编程），在程序开发中主要用来解决一些系统层面上的问题，比如<strong>日志收集，事务管理，权限，缓存，对象池管理</strong>等。</p><p>AOP 可以说是 OOP（Object OrientedProgramming，面向对象编程）的补充和完善。OOP引入封装、继承、多态等概念来建立一种对象层次结构，用于模拟公共行为的一个集合。不过OOP允许开发者定义纵向的关系，但并不适合定义横向的关系，例如日志功能。日志代码往往横向地散布在所有对象层次中，而与它对应的对象的核心功能毫无关系对于其他类型的代码，如<strong>安全性、异常处理和透明的持续性</strong>也都是如此，这种散布在各处的无关的代码被称为横切（crosscutting），在 OOP设计中，它导致了<strong>大量代码的重复，而不利于各个模块的重用</strong>。</p><p>AOP技术恰恰相反，它利用一种称为"横切"的技术，剖解开封装的对象内部，并将那些影响了多个类的公共行为封装到一个可重用模块，并将其命名为"Aspect"，即切面。所谓"切面"，简单说就是那些与业务无关，却为业务模块所共同调用的逻辑或责任封装起来，<strong>便于减少系统的重复代码，降低模块之间的耦合度</strong>，并有<strong>利于未来的可操作性和可维护性</strong>。</p><p>它实际做的就是将业务和一些非业务进行拆解，降低彼此业务模块与非业务模块的耦合度，便于后续的扩展维护。例如<code>权限校验</code>、<code>日志管理</code>、<code>事务处理</code>等都可以使用<code>AOP</code>实现。而<code>Spring</code>就是基于动态代理实现<code>AOP</code>的。如果被代理的类有实现接口的话，就会基于<code>JDK Proxy</code>完成代理的创建。反之就是通过<code>Cglib</code>完成代理创建。</p><p><strong>核心术语：</strong></p><ol type="1"><li><code>目标(Target)</code>:这就被代理的对象，例如我们希望对<code>UserService</code>每个方法进行<code>增强(在不动它的代码情况下增加一些非业务的动作)</code>，那么这个<code>UserService</code>就是目标。</li><li><code>代理(Proxy)</code>:就是给你被代理后的对象的厂商，例如我们上面说过希望对<code>UserService</code>每个方法进行增强，那么给用户返回增强后的对象的类就是<code>代理类</code>。</li><li><code>连接点(JoinPoint)</code>:目标对象，每一个可能可以被增强的方法都可以称为连接点，尽管它最后可能不会被增强。</li><li><code>切入点(Pointcut)</code>:连接点中确确实实被做增强操作的方法就叫切入点。</li><li><code>通知(Advice)</code>:不要被表面的语义误导，通知并不是告知某人的意思，通知的意思是拦截对象后，做的增强操作。</li><li><code>切面(Aspect)</code>:切入点<code>(Pointcut)</code>+通知<code>(Advice)</code></li><li><code>织入(Weaving)</code>：把通知的动作融入到对象中，生成代理对象的过程就叫做织入。</li></ol><h2 id="71-spring-aop">7.1 Spring AOP</h2><p>Spring AOP就是基于动态代理的，底层实现有俩种方式：一种是 <strong>JDK动态代理(JDK Proxy)</strong>，另一种是 <strong>CGLib</strong>(CodeGeneration Library(基于字节码操作)) 的方式。</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/img202304071136659.png" alt="在这里插入图片描述"></p><ul><li><strong>静态代理</strong>通过实现被代理类所实现的接口，内部保存被代理类的引用，在实现的方法中对处理逻辑进行<strong>增强</strong>，真正的方法执行调用被代理对象的方法。<strong>静态代理</strong>比较简洁直观，不过每个目标对象都需要创建一个代理类，在复杂的场景下需要创建大量的代理类，不易于维护，也不易于扩展，我们更加注重的应该是业务开发，对于这一层<strong>增强</strong>处理应该抽取出来。</li><li><strong>JDK 动态代理</strong>基于接口代理，在 JVM运行时通过反射机制生成一个实现代理接口的类，在调用具体方法时会调用InvokeHandler 来进行处理。</li><li><strong>CGLIB 动态代理</strong>基于类代理（字节码提升），通过ASM（Java 字节码的操作和分析框架）将被代理类的 class文件加载进来，通过修改其字节码生成一个子类来处理。</li></ul><p>当然，也可以使用 AspectJ ，AspectJ 可以做Spring AOP干不了的事情，它是AOP 编程的完全解决方案。</p><h2 id="72-spring-aop-和-aspectj-aop-的区别">7.2 Spring AOP 和 AspectJAOP 的区别</h2><p><strong>Spring AOP 属于运行时增强；而 AspectJ是编译时增强</strong>。Spring AOP 只能在运行时织入，AspectJ运行时织入不可用，支持编译时、编译后和加载时织入。</p><p>AspectJ 相比于 Spring AOP 功能更加强大，但是 Spring AOP相对来说更简单。</p><h2 id="73-aspectj-aop通知类型">7.3 AspectJ AOP通知类型</h2><ol type="1"><li><code>Before（前置通知）</code>: 目标对象方法调用前触发增强。</li><li><code>After （后置通知）</code>:目标对象方法调用后进行增强。</li><li><code>AfterReturning（返回通知）</code>:目标对象方法执行结束，返回值时进行增强。</li><li><code>AfterThrowing（异常通知）</code>:目标对象方法执行报错并抛出时做的增强。</li><li><code>Around(环绕通知）</code>:这个比较常用了，目标对象方法调用前后我们可以做各种增强操作,甚至不调用对象的方法都能做到。</li></ol><h2 id="74-多个切面执行顺序我们如何确定">7.4多个切面执行顺序我们如何确定</h2><ol type="1"><li>注解法:使用<code>@Order</code>注解来决定切面<code>bean</code>的执行顺序。</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 值越小优先级越高</span></span><br><span class="line"><span class="meta">@Order(1)</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoggingAspect</span> <span class="keyword">implements</span> <span class="title class_">Ordered</span> {}</span><br></pre></td></tr></table></figure><ol start="2" type="1"><li>继承接口法:<code>implements Ordered</code>接口</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoggingAspect</span> <span class="keyword">implements</span> <span class="title class_">Ordered</span> {</span><br><span class="line">    <span class="comment">// ....</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getOrder</span><span class="params">()</span> {</span><br><span class="line">        <span class="comment">// 返回值越小优先级越高</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h1 id="八spring-的-bean">八、Spring 的 bean</h1><h2 id="81-作用域scope">8.1 作用域（Scope）</h2><table><thead><tr class="header"><th>type</th><th>说明</th></tr></thead><tbody><tr class="odd"><td>singleton</td><td>单例作用域，在SpringloC容器中仅存在一个Bean实例，Bean以单例方式存在，默认值</td></tr><tr class="even"><td>prototype</td><td>原型作用域（多例作用域），每次从容器中调用Bean时，都返回一个新的实例，即<br>每次调用getBean()时，相当于执行newXxxBean()</td></tr><tr class="odd"><td>request</td><td>请求作用域，该作用域仅适用于WebApplicationContext环境，具体为SpringMVC下使用</td></tr><tr class="even"><td>session</td><td>会话作用域，每次HTTP请求都会创建一个新的Bean，该作用域仅适用于WebApplicationContext环境，具体为SpringMVC下使用</td></tr><tr class="odd"><td>application</td><td>全局作用域，同一个HTTPSession共享一个Bean，该作用域仅适用于WebApplicationContext环境，具体为SpringMVC下使用</td></tr></tbody></table><h2 id="82-springbean的线程安全问题">8.2 SpringBean的线程安全问题</h2><p>线程安全一直是代码编写的重地，我们大多时候在系统开发中不会使用多线程。单例bean存在线程安全问题，当多个线程操作同一个对象的时候，这个对象的非静态成员变量会存在线程安全问题。</p><p>解决方法：</p><ul><li>在类中定义一个ThreadLocal成员变量，将需要的可变成员变量保存在ThreadLocal 中（推荐的一种方式，这也是常用一种）；</li><li>在Bean对象中尽量避免定义可变的成员变量。</li></ul><h2 id="83-spring-bean-的生命周期">8.3 Spring bean 的生命周期</h2><p>在传统的Java应用中，bean的生命周期很简单，使用Java关键字 new 进行Bean的实例化，然后该Bean就能够使用了。一旦bean不再被使用，则由Java自动进行垃圾回收。</p><p>相比之下，Spring管理Bean的生命周期就复杂多了，正确理解Bean的生命周期非常重要。</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20240813170530963.png" alt="image-20240813170530963"></p><p>由此可以得出，Bean的三种自定义初始化和销毁方法</p><ul><li>在配置类中指定 @Bean(initMethod = “init”,destroyMethod =“destory”)注解</li><li>实现InitializingBean接口并重写其afterPropertiesSet方法，实现DisposableBean接口并重写destroy方法</li><li>利用java的JSR250规范中的@PostConstruct标注在init方法上，@PreDestroy标注在destroy方法上</li></ul><h2 id="84-spring-mvc">8.4 Spring MVC</h2><p>Spring MVC 是一款很优秀的 MVC 框架。可以让我们的开发更简洁，而且它和Spring 是无缝集成，是 Spring 的一个子模块，是我们上面提到 Spring大家族中 Web 模块。</p><p>Spring MVC 框架主要由 <strong>DispatcherServlet、处理器映射、处理器(控制器)、视图解析器、视图</strong>组成。</p><h3 id="springmvc-arch3"><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/SpringMVC-arch3.png" alt="SpringMVC-arch3"></h3><h1 id="九spring管理事务">九、Spring管理事务</h1><h2 id="91-事务管理方式">9.1 事务管理方式</h2><blockquote><p>事务管理对于企业应用来说是至关重要的，即使出现异常情况，它也可以保证数据的一致性。</p></blockquote><ol type="1"><li><strong>编程式事务，在代码中硬编码。(不推荐使用)</strong></li></ol><p>所谓编程式事务指的是通过编码方式实现事务，允许用户在代码中精确定义事务的边界。</p><p>Spring框架提供了两种编程式事务方式：</p><ul><li>使用TransactionTemplate</li><li>使用PlatformTransactionManager</li></ul><p>Spring团队通常<strong>建议使用TransactionTemplate</strong>进行程序化事务管理。</p><p>TransactionTemplate采用与其他spring模板相同的方法，它使用一种回调方法，使应用程序代码可以处理获取和释放事务资源，让开发人员更加专注于业务逻辑。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> TransactionTemplate transactionTemplate;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testTransaction</span><span class="params">()</span> {</span><br><span class="line"></span><br><span class="line">        transactionTemplate.execute(<span class="keyword">new</span> <span class="title class_">TransactionCallbackWithoutResult</span>() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doInTransactionWithoutResult</span><span class="params">(TransactionStatus transactionStatus)</span> {</span><br><span class="line"></span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// ....  业务代码</span></span><br><span class="line">                } <span class="keyword">catch</span> (Exception e){</span><br><span class="line">                    <span class="comment">//回滚</span></span><br><span class="line">                    transactionStatus.setRollbackOnly();</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line">}</span><br></pre></td></tr></table></figure><ol start="2" type="1"><li><strong>声明式事务，在配置文件中配置（推荐使用）</strong></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transaction</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(String userName)</span>{</span><br><span class="line">    <span class="built_in">this</span>.jdbcTemplate.update(<span class="string">"insert into t_user (name) values (?)"</span>, userName);</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p><strong>声明式事务</strong>又分为两种：</p><ul><li>基于XML的声明式事务</li><li>基于注解的声明式事务</li></ul><h2 id="92-声明式事务注意点">9.2 声明式事务注意点</h2><p><strong>@Transactional(rollbackFor =Exception.class)注解</strong></p><p>在 <code>@Transactional</code> 注解中如果不配置<code>rollbackFor</code> 属性,那么事物只会在遇到<code>RuntimeException</code> 的时候才会回滚,加上<code>rollbackFor=Exception.class</code>,可以让事物在遇到非运行时异常时也回滚。</p><p><code>@Transactional</code>是通过SpringAOP代理增强的方式进行事务的管理与控制的，所以<code>@Transactional</code>只能<strong>加在public方法</strong>上，且<strong>调用方不能是同一个类中的方法（JDK代理模式时）</strong></p><h2 id="93-spring管理事务原理说明">9.3 Spring管理事务原理说明</h2><p>Spring事务的本质 其实就是 AOP 和 数据库事务，Spring将数据库的事务操作提取为 切面，通过 aop在方法执行前后增加数据库事务的操。</p><p>1、在方法开始时判断是否开启新事务，需要开启事务则设置事务手动提交 setautocommit=0;</p><p>2、在方法执行完成后手动提交事务 commit;</p><p>3、在方法抛出指定异常后调用 rollback 回滚事务。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;一spring框架学习路线图&quot;&gt;一、Spring框架学习路线图&lt;/h1&gt;
&lt;p&gt;&lt;img src=&quot;https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/spring%E6%A1%86%E6</summary>
      
    
    
    
    <category term="技术分享" scheme="https://www.junpengzhou.top/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="Java" scheme="https://www.junpengzhou.top/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Office2021安装</title>
    <link href="https://www.junpengzhou.top/article/82d0f8f4.html"/>
    <id>https://www.junpengzhou.top/article/82d0f8f4.html</id>
    <published>2024-08-12T03:23:32.000Z</published>
    <updated>2024-08-14T04:18:18.605Z</updated>
    
    <content type="html"><![CDATA[<p>由于微软在Office2016之后的版本均不提供ISO镜像下载（指正版商业镜像），VL版本的Office需要管理员手动使用ODT工具进行部署。</p><h2 id="一下载odt工具">一、下载ODT工具</h2><p>ODT工具下载： <a href="https://www.microsoft.com/en-us/download/details.aspx?id=49117">官方下载地址</a></p><p>点击<code>[Download]</code>按钮下载微软官网提供的ODT工具，下载下来的是一个自解压程序的压缩包，双击选择解压位置，你就会得到一个红色图标的<code>setup.exe</code>和一些示例的xml文件。我们只要其中的<code>setup.exe</code>即可。</p><h2 id="二定制自己的office套件">二、定制自己的Office套件</h2><p><a href="https://config.office.com/deploymentsettings">点击此处开始配置</a>打开上面的微软Office提供的Office配置定制网站，可以自由地定制想要的Office。此处仅介绍几个重点：</p><ul><li>版本选择：请选择带<code>批量许可证</code>字样的版本，同时请不要选择带<code>SPLA</code>字样的版本。（注意：如果你要安装Visio之类的组件，LTSC版本会和个人版OFFICE冲突，如果你电脑上有个人版OFFICE导致安装冲突请不要选择带LTSC字样版本。）</li><li>你可以自由选择安装的组件和语言，比如仅安装Word，Excel和PowerPoint。</li><li>授权和激活：开启自动接受EULA，点选KMS选项。</li><li>DIY好你心仪的配置之后，可以点击<code>导出</code>按钮，如有询问默认文件格式点击<code>[保留当前配置]</code>即可。<em><strong>你将会下载到一个xml格式的配置文件，为了后续操作方便，你可以重命名为<code>office.xml</code>。</strong></em></li></ul><h2 id="三开始安装office">三、开始安装Office</h2><p>把步骤1得到的setup.exe和步骤2得到的office.xml放在同一个目录，在当前目录的地址栏输入cmd回车，打开命令提示符窗口，输入以下命令即可执行安装：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setup.exe /configure office.xml</span><br></pre></td></tr></table></figure><p>将下面脚本保存为step1.bat，并与setup.exe与刚刚所生成的xml文件放置同目录下，然后双击运行即可安装。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo @off</span><br><span class="line">setup.exe /configure officeandvisio.xml</span><br></pre></td></tr></table></figure><h2 id="四激活office2021">四、激活Office2021</h2><p>将以下脚本保存为step2.bat，安装完office后双击运行以激活office！</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">chcp 65001</span><br><span class="line">"%windir%\System32\cscript" "%ProgramFiles%\Microsoft Office\Office16\ospp.vbs" /sethst:kms.03k.org</span><br><span class="line">"%windir%\System32\cscript" "%ProgramFiles%\Microsoft Office\Office16\ospp.vbs" /act</span><br><span class="line">echo '是否出现&lt;Product activation successful&gt;关键词，出现则表示激活成功！'</span><br><span class="line">pause</span><br></pre></td></tr></table></figure><p>脚本中其中<code>/sethst:</code>后紧跟着的域名为kms服务器域名，其中KMS站点测试情况：<a href="https://www.coolhub.top/tech-articles/kms_list.html">kms站点列表</a></p><h2 id="五再次检查激活状态">五、再次检查激活状态</h2><p>随意打开一个word或者ppt文件，找到<code>文件</code>-&gt;<code>账户</code>-&gt;<code>产品信息</code>查看是否激活！</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20240812114533020.png" alt="image-20240812114533020"></p><p>本文参考自：<a href="https://blog.03k.org/post/dowload-vloffice.html">https://blog.03k.org/post/dowload-vloffice.html</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;由于微软在Office
2016之后的版本均不提供ISO镜像下载（指正版商业镜像），VL版本的Office需要管理员手动使用ODT工具进行部署。&lt;/p&gt;
&lt;h2 id=&quot;一下载odt工具&quot;&gt;一、下载ODT工具&lt;/h2&gt;
&lt;p&gt;ODT工具下载： &lt;a href=&quot;https:</summary>
      
    
    
    
    <category term="技术分享" scheme="https://www.junpengzhou.top/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="软件安装" scheme="https://www.junpengzhou.top/tags/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/"/>
    
  </entry>
  
  <entry>
    <title>计算机千年虫问题</title>
    <link href="https://www.junpengzhou.top/article/cff57d86.html"/>
    <id>https://www.junpengzhou.top/article/cff57d86.html</id>
    <published>2024-08-12T02:27:56.000Z</published>
    <updated>2024-08-14T04:18:18.605Z</updated>
    
    <content type="html"><![CDATA[<h1 id="2000年问题">2000年问题</h1><p><strong>2000年问题</strong>（英语：Year 2000Problem），在英文中也被简称为<strong>Y2K</strong>，在中国大陆及香港常被称为<strong>千年虫问题</strong>，台湾则称<strong>千禧蟲危机</strong>，是指由于当时的计算机程序在日期表达上的设计问题，从而导致计算机会误读在2000年后的一些日期，并进一步导致计算机出现错误所引起的计算机问题，当时的计算机程序普遍采用6位数字来存储时间，只显示四位数字后的两位数字，但这又会导致计算机系统紊乱，使其无法区分2000年与1900年，从而导致了误读问题，并导致计算机紊乱。2000年问题可能会威胁到那些运行在重要行业中的计算机与大量社会基础设施，甚至影响到政府部门与军队。从而导致停水、断电，银行瘫痪，最极端的情况下，它甚至可能会导致核电厂发生事故，核武器与导弹失控以及交通与通信的中断，并最终引发灾难性的后果。</p><p>这个悬挂于南特中央理工学院的电子标志将2000年1月3日错误显示为了1900年1月3日。</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/Bug_de_l&#39;an_2000.jpg" alt="Bug_de_l'an_2000"></p><p>但最终，在2000年问题引起社会广泛重视后，它得到了足够的关注与处理，最终在规模庞大的修复行动后，它没有在新千年到来之际引起全球电脑系统的大规模瘫痪。</p><h1 id="程序问题本源">程序问题本源</h1><p>两千年问题始于1960年代，当时计算机内存和外部存储介质的成本很高，大多数数据处理需要借助穿孔卡片。为了节省硬件成本，葛丽丝·霍普在HarvardMarkI上以6位数字来存储时间，即年、月、日各两位。这个习惯被COBOL继承下来，传播到整个计算机程序界。</p><p>当时的编程语言，如COBOL和RPG，使用ASCII和EBCDIC编码表示数据。如果用四位数字表示年份，就要多占用存储介质空间，使成本增加；因此为了节省存储空间，计算机系统的编程人员采用两位数字表示年份。随着计算机技术的迅猛发展，存储介质的价格逐步下降，但在计算机系统中使用两位数字来表示年份的做法却由于惯性思维而被沿袭下来；对大多数程序员来说，他们并不认为所编写的软件会持续使用很多年。</p><p>具体来讲，两千年问题要解决的事项包括以下几个要点：</p><p>软件在特定的日期会否出现运作错误。要留意的日期包括以下几个日子：</p><ul><li>1999年1月1日</li><li>1999年4月9日（1999年的第99日）</li><li>1999年9月9日</li><li>1999年12月31日</li><li>2000年1月1日</li><li>2000年2月28日</li><li>2000年2月29日</li><li>2025年1月1日（昭和100年问题）</li><li>2038年1月19日（参见2038年问题）</li><li>2099年1月1日</li><li>2099年4月9日</li><li>2099年9月9日</li><li>2099年12月31日</li><li>2111年11月11日</li></ul><p>软件会不会利用特定的日期格式来表示档案完结，或档案已删除。软件会否出现错误的日期，如“19100年”或“3000年”。两千年问题是由鲍伯·贝默在1958年第一次提出的。在其后的二十年里，他用了很大的努力，希望政府、企业和国际组织（如IBM和ISO）来关注这个问题，但反响寥寥。直到2000年将要到来的时候，人们才感觉到两千年问题的紧迫性。于是社会和政府都投入了大量的人力和物力来避免发生大规模的计算机灾难。而从现在来看，这些努力也获取了相应的成果。</p><p>总结：本质问题在于程序设计之初的历史背景与环境因素有关，由于存储空间的有限，加上忽略了业务膨胀速度所导致的问题。现在这样的情况也不断的在上演，程序员们对于业务的考虑大多也仅局限于10年内的业务发展考量。</p><h1 id="2038问题">2038问题</h1><p>在计算机应用上，2038年问题可能会导致某些软件在2038年1月19日3时14分07秒之后无法正常工作。所有使用POSIX时间表示时间的程序都将受其影响，因为它们以自1970年1月1日经过的秒数（忽略闰秒）来表示时间[1]。这种时间表示法在类Unix（Unix-like）操作系统上是一个标准，并会影响以其C编程语言开发给其他大部分操作系统使用的软件。在大部分的32位操作系统上，此“time_t”数据模式使用一个有正负号的32位整数（signedint32）存储计算的秒数。依照此“time_t”标准，在此格式能被表示的最后时间是2038年1月19日03:14:07，星期二（UTC）。超过此一瞬间，时间将会“绕回”（wraparound）且在内部被表示为一个负数，并造成程序无法工作，因为它们无法将此时间识别为2038年，而可能会依个别实现而跳回1970年或1901年。因此可能产生错误的计算及动作。</p><p>有少数的情况下，在制定规格时，特别规定以无正负号的32位整数（unsignedint32）存储POSIX时间，因此错误会被延后到2106年。例如比特币区块链中的区块时间戳记，就是以这种方法存储。[2][3]</p><p>目前并没有针对现有的CPU／操作系统搭配的简单解决方案。直接将POSIX时间更改为64位模式将会破坏对于软件、数据存储以及所有与二进制表示时间相关的部分的二进位兼容性。更改成无符号的32位整数则会影响许多与两时间之差相关的程序。不过，那时使用32位系统的计算机可能会很少。</p><p>大部分64位操作系统已经把time_t这个系统变量改为64位宽。不过，其他现有架构的改动仍在进行中，不过预期“应该可以在2038年前完成”。然而，直到2006年，仍然有数以亿计的32位系统在运行中，特别是许多嵌入式系统。相对于一般电脑科技18至24个月的革命性更新，嵌入式系统可能直至使用寿命终结都不会改变。32位time_t的使用亦被编码于文件格式，例如众所周知的ZIP文件压缩格式。其能存在的时间远比受影响的机器长。</p><p>新的64位运算器可以记录至约2900亿年后的292,277,026,596年12月4日15:30:08，星期日（UTC）。</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/640" alt="图片"></p><h2 id="32位操作系统">32位操作系统</h2><p>在计算机应用上，2038年问题可能会导致某些软件在2038年1月19日3时14分07秒之后无法正常工作。</p><p>所有使用POSIX时间表示时间的程序都将受其影响，因为它们以自1970年1月1日经过的秒数（忽略闰秒）来表示时间。</p><p>在大部分的32位操作系统上，time_t使用一个有正负号的32位有符号整数存储计算的秒数。依照time_t标准，在此格式能被表示的最后时间是2038年1月19日03:14:07，星期二（UTC）。</p><p>一旦超过这个时刻，时间将会绕回且在内部被表示为一个负数，并造成程序无法工作，因为它们无法将此时间识别为2038年，而可能会依个别实现而跳回1970年或1901年。因此可能产生错误的计算及动作。</p><h2 id="64位操作系统">64位操作系统</h2><p>大部分64位操作系统已经把time_t这个系统变量改为64位，但是仍然有数以亿计的32位系统在运行中，特别是许多嵌入式系统。</p><p>32位time_t的使用亦被编码于文件格式，例如众所周知的ZIP文件压缩格式。其能存在的时间远比受影响的机器长。</p><p>新的64位运算器可以记录至约2900亿年后的292,277,026,596年12月4日15:30:08，星期日（UTC），基本上可以彻底解决时间回环问题。</p><h1 id="对比2038问题与千年虫问题">对比2038问题与千年虫问题</h1><p>2038年问题与之前的千年虫问题的杀伤力是不一样的，千年虫属于应用程序的问题，而2038年问题却是系统级的，有更大的杀伤力。</p><p>Linux Kernel 5.6 的开发者已经准备好着手解决将在下一个十年到来的 2038年问题。Linux 5.6 也成为第一个为 32 位系统准备运行到 2038年之后的主线内核。</p><p>至于像MySQL等组件同样面临2038年问题，目前还有17年的时候，我们相信可以应对这次危机。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;2000年问题&quot;&gt;2000年问题&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;2000年问题&lt;/strong&gt;（英语：Year 2000
Problem），在英文中也被简称为&lt;strong&gt;Y2K&lt;/strong&gt;，在中国大陆及香港常被称为&lt;strong&gt;千年虫问题&lt;/str</summary>
      
    
    
    
    <category term="技术分享" scheme="https://www.junpengzhou.top/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="操作系统" scheme="https://www.junpengzhou.top/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>让搜索引擎更好收录网站内容攻略指南</title>
    <link href="https://www.junpengzhou.top/article/430e01bd.html"/>
    <id>https://www.junpengzhou.top/article/430e01bd.html</id>
    <published>2023-08-31T02:51:08.000Z</published>
    <updated>2024-08-14T04:18:18.605Z</updated>
    
    <content type="html"><![CDATA[<p>专业术语叫SEO（Search EngineOptimization），中文译为“搜索引擎优化”。通俗来说就是可以更好地让我们的网站被访问，也可以使站点内容更好地传播。SEO优化包含很多内容，本站点只是列出如果被收录和检索、</p><h3 id="sitemapxml">sitemap.xml</h3><h4 id="添加蜘蛛协议robotstxt">添加蜘蛛协议robots.txt</h4><p>在网站根目录下添加robots.txt协议，网络上有专门生成改文件格式的网站。</p><p>主动推送</p><p>nofollow标签的意义在于指示搜索引擎不要追踪（即抓取）网页上的带有nofollow属性的任何出站链接，以减少垃圾链接的分散网站权重！</p><p>&lt;a 标签添加nofollow</p><p>然后发布后访问： <a href="https://cloud.tencent.com/developer/tools/blog-entry?target=https%3A%2F%2Flinkinstars.com%2Fsitemap.xml"><span>https://linkinstars.com/sitemap.xml</span></a><a href="https://cloud.tencent.com/developer/tools/blog-entry?target=https%3A%2F%2Flinkinstars.com%2Fbaidusitemap.xml"><span>https://linkinstars.com/baidusitemap.xml</span></a>如果可以正常访问到 <code>xml</code> 文件就可以了</p><h3 id="文章三层目录地址以url持久化">文章三层目录地址以URL持久化</h3><p>在线sitemap生成</p><p><a href="https://www.xml-sitemaps.com/">https://www.xml-sitemaps.com/</a></p><h2 id="插件生成-sitemap">插件生成 sitemap</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-sitemap --save  </span><br><span class="line">npm install hexo-generator-baidu-sitemap --save</span><br></pre></td></tr></table></figure><p>爬虫抓取模拟</p><p><a href="https://www.dute.org/crawler">https://www.dute.org/crawler</a></p><p>百度搜索资源平台 ==&gt; 用户中心 ==&gt; 站点管理</p><p><a href="https://ziyuan.baidu.com/site/index">直达链接</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;专业术语叫SEO（Search Engine
Optimization），中文译为“搜索引擎优化”。通俗来说就是可以更好地让我们的网站被访问，也可以使站点内容更好地传播。SEO优化包含很多内容，本站点只是列出如果被收录和检索、&lt;/p&gt;
&lt;h3 id=&quot;sitemapxml&quot;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Excel中让单元格中图片随单元格的变化而调整</title>
    <link href="https://www.junpengzhou.top/article/5617d93b.html"/>
    <id>https://www.junpengzhou.top/article/5617d93b.html</id>
    <published>2023-08-30T12:54:04.000Z</published>
    <updated>2024-08-14T04:18:18.605Z</updated>
    
    <content type="html"><![CDATA[<h1 id="excel中让单元格中图片随单元格边界变化而变化">Excel中让单元格中图片随单元格边界变化而变化</h1><h2 id="一效果说明">一、效果说明</h2><blockquote><p>当在单元格中插入图片，当拖拉单元格边界时图片也随着单元格的边界变动而平铺展开</p></blockquote><h2 id="二操作步骤">二、操作步骤</h2><p>Excel的单元格中插入一图片，如何让图片对齐网格，并让其随单元格的变化而调整呢？</p><p>1.右上角菜单栏选中插入图片，然后选中一直你要插入的图片.并调整至和单元格差不多胖的地方.</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/e8e85ef7-688b-4804-878c-998158902672.png"></p><p>2.右键图片选择大小与属性</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/01075553-ef30-41bf-a82e-ea6b5a86f409.png"></p><p>3.选中图片进行图片格式设置，设置网格对齐.</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/f5d832dc-88d4-4762-9d73-c713bfaa7da7.png"></p><p>好了搞定，随意拖拉，会自适应的进行缩放，自己试一下吧~</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;excel中让单元格中图片随单元格边界变化而变化&quot;&gt;Excel中让单元格中图片随单元格边界变化而变化&lt;/h1&gt;
&lt;h2 id=&quot;一效果说明&quot;&gt;一、效果说明&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;当在单元格中插入图片，当拖拉单元格边界时图片也随着单元格的边界变动</summary>
      
    
    
    
    <category term="技术分享" scheme="https://www.junpengzhou.top/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="Excel技巧" scheme="https://www.junpengzhou.top/tags/Excel%E6%8A%80%E5%B7%A7/"/>
    
  </entry>
  
  <entry>
    <title>如何获取APlayer所需要的腾讯音乐的songmid？</title>
    <link href="https://www.junpengzhou.top/article/abefaec9.html"/>
    <id>https://www.junpengzhou.top/article/abefaec9.html</id>
    <published>2023-08-28T09:40:25.000Z</published>
    <updated>2024-08-14T04:18:18.605Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一aplayer介绍">一、Aplayer介绍</h1><blockquote><p>APlayer is a lovely HTML5 music player. <strong>APlayersupports:</strong></p><ul><li>Media formats - MP4 H.264 (AAC or MP3) - WAVE PCM - Ogg TheoraVorbis</li><li>Features - Playlist - Lyrics</li></ul></blockquote><p><strong><a href="https://aplayer.js.org/">EnglishDocs</a></strong></p><p><strong><a href="https://aplayer.js.org/#/zh-Hans/">中文文档</a></strong></p><h1 id="二抓取qq音乐的songmid">二、抓取QQ音乐的songmid</h1><p><code>songmid</code>为腾讯音乐分享的音乐单曲标识ID，使用改id可抓取免费音乐的相关歌曲、歌词、封面，这部分内容仅介绍如何获取此id。</p><h2 id="操作步骤">操作步骤</h2><ol type="1"><li>找到要进行分享的音乐，复制链接，浏览器打开</li></ol><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230828175158428.png" alt="image-20230828175158428"></p><ol start="2" type="1"><li>浏览器打开页面中点击播放，进入QQ音乐的官方H5音乐播放器中</li></ol><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230828175236399.png" alt="image-20230828175236399"></p><ol start="3" type="1"><li>在网页播放器中，F12打开开发者选项，点击<code>网络(Network)</code>，按<code>ctrl+f</code>进行搜索<code>songmid</code>在结果中找到带有<code>musics</code>的请求项，点击进入查看<code>Response</code>并复制其内容</li></ol><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230828175655607.png" alt="image-20230828175655607"></p><ol start="4" type="1"><li>将响应报文（Response）进行json格式化，找到songmid节点，复制出节点值，该值即为songmid</li></ol><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230828175832389.png" alt="image-20230828175832389"></p><ol start="5" type="1"><li>将<code>songmid</code>填写入在Aplayer的单曲id设置选项内，即可网页中嵌入单曲播放器</li></ol><p>over~<span class="emoji" data-emoji="sunrise_over_mountains">🌄</span>水一期博文成就达成~<span class="emoji" data-emoji="dog">🐶</span></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;一aplayer介绍&quot;&gt;一、Aplayer介绍&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;APlayer is a lovely HTML5 music player. &lt;strong&gt;APlayer
supports:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li</summary>
      
    
    
    
    <category term="技术分享" scheme="https://www.junpengzhou.top/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="建站经验" scheme="https://www.junpengzhou.top/tags/%E5%BB%BA%E7%AB%99%E7%BB%8F%E9%AA%8C/"/>
    
  </entry>
  
  <entry>
    <title>Markdown插入bilibili视频</title>
    <link href="https://www.junpengzhou.top/article/eeaa9f96.html"/>
    <id>https://www.junpengzhou.top/article/eeaa9f96.html</id>
    <published>2023-08-23T07:24:47.000Z</published>
    <updated>2024-08-14T04:18:18.605Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一操作步骤">一、操作步骤</h1><ol type="1"><li><p>在<code>素质三连键</code><span class="emoji" data-emoji="dog">🐶</span>边上找到分享按钮，然后选择<code>嵌入代码</code><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230823152733855.png" alt="image-20230823152733855"></p></li><li><p>复制出来的嵌入代码其中src的内容为视频链接，其他参数为iframe参数</p></li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">"//player.bilibili.com/player.html?aid=500715827&amp;bvid=BV1CK411u75G&amp;cid=269252712&amp;page=2&amp;high_quality=1&amp;danmaku=0"</span> <span class="attr">scrolling</span>=<span class="string">"no"</span> <span class="attr">border</span>=<span class="string">"0"</span> <span class="attr">frameborder</span>=<span class="string">"no"</span> <span class="attr">framespacing</span>=<span class="string">"0"</span> <span class="attr">allowfullscreen</span>=<span class="string">"true"</span> <span class="attr">sandbox</span>=<span class="string">"allow-top-navigation allow-same-origin allow-forms allow-scripts"</span>&gt;</span> <span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="3" type="1"><li>修改链接</li></ol><ul><li>视频链接参数</li></ul><table><thead><tr class="header"><th style="text-align: left;">选项</th><th style="text-align: left;">说明</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">high_quality</td><td style="text-align: left;">1 最高画质 0 最低画质</td></tr><tr class="even"><td style="text-align: left;">danmaku</td><td style="text-align: left;">1 打开弹幕 0 关闭弹幕</td></tr><tr class="odd"><td style="text-align: left;">autoplay</td><td style="text-align: left;">1 打开自动播放 0 关闭自动播放</td></tr></tbody></table><ul><li>iframe参数</li></ul><table><thead><tr class="header"><th style="text-align: left;">选项</th><th style="text-align: left;">说明</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">allowfullscreen</td><td style="text-align: left;">true 允许全屏 false 不允许</td></tr><tr class="even"><td style="text-align: left;">sandbox</td><td style="text-align: left;">allow-top-navigation allow-same-originallow-forms allow-scripts 禁止弹出网页</td></tr><tr class="odd"><td style="text-align: left;">width</td><td style="text-align: left;">宽度像素</td></tr><tr class="even"><td style="text-align: left;">height</td><td style="text-align: left;">高度像素</td></tr></tbody></table><ul><li>修改后代码</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">"//player.bilibili.com/player.html?aid=500715827&amp;bvid=BV1CK411u75G&amp;cid=269252712&amp;page=2&amp;high_quality=1&amp;danmaku=0&amp;autoplay=0"</span> <span class="attr">scrolling</span>=<span class="string">"no"</span> <span class="attr">border</span>=<span class="string">"0"</span> <span class="attr">frameborder</span>=<span class="string">"no"</span> <span class="attr">framespacing</span>=<span class="string">"0"</span> <span class="attr">allowfullscreen</span>=<span class="string">"true"</span> <span class="attr">sandbox</span>=<span class="string">"allow-top-navigation allow-same-origin allow-forms allow-scripts"</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"600"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="4" type="1"><li>将修改后的<code>嵌入代码</code>插入到Markdown文档中</li></ol><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230823155801529.png" alt="image-20230823155801529"></p><h1 id="二效果示例">二、效果示例</h1><div class="aspect-ratio" style="text-align: center;">  <iframe src="//player.bilibili.com/player.html?aid=500715827&bvid=BV1CK411u75G&cid=269252712&page=2&high_quality=1&danmaku=0&autoplay=0" scrolling="no" frameborder="no" framespacing="0" allowfullscreen="true" sandbox="allow-top-navigation allow-same-origin allow-forms allow-scripts">  </iframe></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;一操作步骤&quot;&gt;一、操作步骤&lt;/h1&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;&lt;p&gt;在&lt;code&gt;素质三连键&lt;/code&gt;&lt;span class=&quot;emoji&quot; data-emoji=&quot;dog&quot;&gt;🐶&lt;/span&gt;边上找到分享按钮，然后选择&lt;code&gt;嵌入代码&lt;/co</summary>
      
    
    
    
    <category term="技术分享" scheme="https://www.junpengzhou.top/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="Markdown" scheme="https://www.junpengzhou.top/tags/Markdown/"/>
    
  </entry>
  
  <entry>
    <title>为博客添加友链朋友圈功能</title>
    <link href="https://www.junpengzhou.top/article/85fa82d5.html"/>
    <id>https://www.junpengzhou.top/article/85fa82d5.html</id>
    <published>2023-08-17T03:12:15.000Z</published>
    <updated>2024-08-14T04:18:18.605Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一什么是友链朋友圈">一、什么是友链朋友圈</h1><blockquote><p>你是否经常烦恼于友链过多但没有时间浏览？那么友链朋友圈将解决这一痛点。你可以随时获取友链网站的更新内容，并了解友链的活跃情况。</p></blockquote><h2 id="11-效果传送门">1.1 效果传送门</h2><p><a href="/fcircle/">博客快讯</a></p><h2 id="12-效果示意图">1.2 效果示意图</h2><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230818142343102.png" alt="image-20230818142343102"></p><h1 id="二准备材料">二、准备材料</h1><ol type="1"><li>vercel账号注册</li><li>github账号注册</li></ol><h1 id="三友链朋友圈贡献者介绍">三、友链朋友圈贡献者介绍</h1><table><thead><tr class="header"><th>名称</th><th>主页</th><th>说明</th></tr></thead><tbody><tr class="odd"><td>小冰（冰老师）</td><td><a href="https://zfe.space/">https://zfe.space/</a></td><td>友链朋友圈理念奠基人，初代前后端方案编写者！</td></tr><tr class="even"><td>Akilar（店长）</td><td><a href="https://akilar.top/">https://akilar.top/</a></td><td>为历代友链朋友圈提供前端方案，npm 插件方案编写者</td></tr><tr class="odd"><td>heo（设计师）</td><td><a href="https://blog.zhheo.com/">https://blog.zhheo.com/</a></td><td>友链朋友圈前端方案、视觉设计，UI 方案多样化</td></tr><tr class="even"><td>贰猹（后端）</td><td><a href="https://noionion.top/">https://noionion.top/</a></td><td>历代友链朋友圈后端维护者，3.0方案编写者，多主题友链抓取适配，朋友圈售后中流砥柱，公共库方案、api编写者</td></tr><tr class="odd"><td>RaXianch</td><td><a href="https://blog.raxianch.moe/">https://blog.raxianch.moe/</a></td><td>友链朋友圈后端维护，多主题友链抓取适配</td></tr><tr class="even"><td>yyyz（重构）</td><td><a href="https://www.yyyzyyyz.cn/">https://www.yyyzyyyz.cn/</a></td><td>4.0方案编写者，多主题友链抓取适配，服务器部署方案编写者，友链朋友圈现维护者</td></tr><tr class="odd"><td>林木木（新版）</td><td><a href="https://immmmm.com/">https://immmmm.com/</a></td><td>新版友链朋友圈前端方案编写者</td></tr><tr class="even"><td>Fox</td><td><a href="https://foolishfox.cn/">https://foolishfox.cn/</a></td><td>提供 sql api 与 sql 存储本地化方案</td></tr></tbody></table><h1 id="四部署过程">四、部署过程</h1><p>官方教程文档：<a href="https://fcircle-doc.js.cool/#/">https://fcircle-doc.js.cool/#/</a></p><p>fork项目地址：<a href="https://github.com/Rock-Candy-Tea/hexo-circle-of-friends">https://github.com/Rock-Candy-Tea/hexo-circle-of-friends</a></p><p>fork功能说明：</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230817111653757.png" alt="image-20230817111653757"></p><p>编辑配置（直接远程github上修改，当然也可以clone下来修改进行commit和push）：</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230817111858083.png" alt="image-20230817111858083"></p><p>具体部署流程，官方流程都有进行细致说明，以官方教程为准，这里只讲述本人部署中遇到的问题，以及解决问题的思路，希望能帮助大家排坑！</p><h2 id="41-问题一访问后端all服务出现start-error">4.1问题一（访问后端/all服务出现start error）</h2><p>部署后访问项目路径/all地址出现<code>{“message”:”start error”}</code>，排查访问日志拉到错误的堆栈底，发现报错了<code>data.db path empty</code>，但是我设置的模式不是mongodb吗，怎么还会读取sqlite才会用的data.db了呢？</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">File “/var/task/api_dependencies/sql/db_interface.py”, line 62, in __get_sql_engine</span><br><span class="line">raise “data.db path empty”</span><br></pre></td></tr></table></figure><p>按上述日志说明没有data.db生成，逆链路想是gihub上workflow上没执行定时爬取成功，但是看执行过程好像没有抛错，重新runworkflow依然不行，官方文档主推的也是sqlite进行，mongodb模式下可能有bug？，就秉着试一下的心，改成sqlite看看</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230818000308040.png" alt="image-20230818000308040"></p><p>之后改成sqlite模式再执行，发现一切正常，github仓库上产生出了data.db文件，而且还有个细节，细看下图看框起来的部分，githubaction的console将sqlite脱敏了</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230818114822289.png" alt="image-20230818114822289"></p><p>这时候反推出来<strong>githubaction的控制台脱敏规则其实是将有与所设置的secrets环境变量的值进行全局替换脱敏</strong>，这时候回过去细看了一下刚刚设置mongodb模式时的执行日志，<strong>刚刚的mongodbupdate posts这行应该脱敏才对</strong></p><p><strong>至此可以缩小排查范围到环境变量的配置了</strong>，要么设置的值打错了，经过检查发现<strong>mongodb打成了mangodb</strong>，这种<strong>细小的错误往往最为致命而难查</strong></p><p>气定神闲，<strong>设置环境变量STORAGE_TYPE为mongodb正确</strong>后，<strong>再次runworkflow</strong>，果然<strong>正常执行</strong>了，这次<strong>再看mongodb字样果然被脱敏</strong>了，这算是一个部署过程中的小插曲，总体来说，官方文档给的还是相当细致准确的</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230818113652666.png" alt="image-20230818113652666"></p><p>最后部署成功访问后端部署地址后加/all进行数据抽取，成功响应了爬取到的所有数据</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230818124238017.png" alt="image-20230818124238017"></p><p>赶紧去博主评论区面壁一下表示sorrrrrrry，还<strong>发现在向作者提问时候就已经打错了，哈哈哈哈哈哈，再次尬住...</strong></p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230818114552254.png" alt="image-20230818114552254"></p><h2 id="42-问题二后端有数据前端还是没有渲染出来">4.2问题二（后端有数据，前端还是没有渲染出来）</h2><p>部署成功后，打开页面发现还是没有数据</p><p>打开network搜索了没有发出和友链朋友圈后端相关的接口，浏览器清理缓存也无效，这时候确定作者应该是为了避免频繁请求带来的页面打开慢的问题，将第一次获取到的数据缓存下来了，且有一定的过期时间，在此过期时间还没到之前不会重复请求，且退出浏览器重新进入也无法显示，推断应该是存储在了localstorage中，打开一看果然是，且数据项带有创建时间与其对应的过期天数相关的设置，一天以内都不会重复请求的</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230818122645974.png" alt="image-20230818122645974"></p><p>由此可以得出结论：<code>第一次没有获取到数据，浏览器会缓存下来，在一定时间内不会再出现与服务后端进行通信获取最新有效数据</code>这时候如果想在本机上获取最新数据，可以打开开发者选项，在Application中找到LocalStorage，之后删除友链朋友圈相关的UpdatedData和CreatedData结尾的缓存项，刷新页面，这时将会从服务端再次获取，出现了爬取到的数据了！</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230817234940454.png" alt="image-20230817234940454"></p><h1 id="五系统架构图">五、系统架构图</h1><p>以下是我根据此次部署简单绘制的系统架构图，说明整体的部署结构和交互原理，希望对大家理解整体部署结构和进行链路问题排查有帮助。</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230818150314488.png" alt="image-20230818150314488"></p><h1 id="六鸣谢文章">六、鸣谢文章</h1><blockquote><p><a href="https://www.yyyzyyyz.cn/posts/9b5ab1e3eb29/">友链朋友圈前/后端开发记录</a><a href="https://fcircle-doc.yyyzyyyz.cn/">友链朋友圈5.0部署文档</a> <a href="https://noionion.top/47095">友链朋友圈食用说明书</a> <a href="https://immmmm.com/hi-friends-circle/">Hi，My Friends（PublicBeta）</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;一什么是友链朋友圈&quot;&gt;一、什么是友链朋友圈&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;你是否经常烦恼于友链过多但没有时间浏览？那么友链朋友圈将解决这一痛点。你可以随时获取友链网站的更新内容，并了解友链的活跃情况。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=</summary>
      
    
    
    
    <category term="技术分享" scheme="https://www.junpengzhou.top/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="建站经验" scheme="https://www.junpengzhou.top/tags/%E5%BB%BA%E7%AB%99%E7%BB%8F%E9%AA%8C/"/>
    
  </entry>
  
  <entry>
    <title>来一场手写的星空(Less、Saas、Stylus)</title>
    <link href="https://www.junpengzhou.top/article/74d1e41b.html"/>
    <id>https://www.junpengzhou.top/article/74d1e41b.html</id>
    <published>2023-08-12T16:07:29.000Z</published>
    <updated>2024-08-14T04:18:18.605Z</updated>
    
    <content type="html"><![CDATA[]]></content>
    
    
      
      
    <summary type="html">
</summary>
      
    
    
    
    <category term="技术分享" scheme="https://www.junpengzhou.top/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="前端技术" scheme="https://www.junpengzhou.top/tags/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>CloudFlare+NameSilo进行域名解析</title>
    <link href="https://www.junpengzhou.top/article/2c13306e.html"/>
    <id>https://www.junpengzhou.top/article/2c13306e.html</id>
    <published>2023-08-12T02:00:20.000Z</published>
    <updated>2024-08-14T04:18:18.605Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一-前提条件">一、 前提条件</h1><ul><li>CloudFlare账号注册</li><li>NameSilo账号注册</li></ul><h1 id="二-操作步骤">二、 操作步骤</h1><ol type="1"><li><p>在NameSilo中申请一个域名，对比起来NameSilo上的域名购买更加优惠</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230812100350459.png" alt="image-20230812100350459"></p></li><li><p>从CloudFlare上复制下NameServer1和NameServer2（Add aWebSite，然后输入对应域名即可出现以下页面） <img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230812100744729.png" alt="image-20230812100744729"></p></li><li><p>在NameSilo页面中选择对应域名，点击manager进入管理页面，选中域名，并点击ChangeNameservers功能按钮</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230812100231247.png" alt="image-20230812100231247"></p></li><li><p>在弹出页面中清除原有的所有NameServer记录（如果有其他用途记得先记录下来进行备忘），并添加从CloudFlare中复制的NameServer并Submit</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230812100634085.png" alt="image-20230812100634085"></p></li><li><p>等待收到CloudFlare接管域名控制权的消息，或者过几个小时上去查看一下，如果显示Greatnew！即可继续下一步</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230812105952000.png" alt="image-20230812105952000"></p></li><li><p>之后在CloudFlare中的DNSRecords管理页中，配置站点的CNAME指向，配置方式按Vercel中自定义域名时Vercel所给出的提示进行配置即可</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230812123956463.png" alt="image-20230812123956463"></p></li><li><p>配置完毕后返回查看Vercel发现流程节点继续流转下去了，待生成SSL证书完毕后，即可开始验证是否能正常访问</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230812124255443.png" alt="image-20230812124255443"></p></li><li><p>开始验证是否正常访问，可能会出现问题，重定向次数过多</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230812124419079.png" alt="image-20230812124419079"></p></li><li><p>如果出现上述问题进入 CloudflareDashboard，点击有问题的域名，打开左侧的 SSL/TLS 设置，在 Overview中设置加密模式为完全或完全（严格）即可。</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230812124905866.png" alt="image-20230812124905866"></p></li><li><p>使用域名再次测试访问恢复正常了！</p></li></ol><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230812124952485.png" alt="image-20230812124952485"> 至此，全部完成！！<span class="emoji" data-emoji="laughing">😆</span></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;一-前提条件&quot;&gt;一、 前提条件&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;CloudFlare账号注册&lt;/li&gt;
&lt;li&gt;NameSilo账号注册&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;二-操作步骤&quot;&gt;二、 操作步骤&lt;/h1&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;&lt;p&gt;在Nam</summary>
      
    
    
    
    <category term="技术分享" scheme="https://www.junpengzhou.top/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="建站经验" scheme="https://www.junpengzhou.top/tags/%E5%BB%BA%E7%AB%99%E7%BB%8F%E9%AA%8C/"/>
    
  </entry>
  
  <entry>
    <title>使用Vercel部署Twikoo评论系统</title>
    <link href="https://www.junpengzhou.top/article/d56aa5a7.html"/>
    <id>https://www.junpengzhou.top/article/d56aa5a7.html</id>
    <published>2023-08-11T04:20:35.000Z</published>
    <updated>2024-08-14T04:18:18.605Z</updated>
    
    <content type="html"><![CDATA[<p><code>注意 Vercel 部署的环境需配合 1.4.0 以上版本的 twikoo.js 使用 默认域名 *.vercel.app 在中国大陆访问速度较慢甚至无法访问，绑定自己的域名可以提高访问速度</code></p><ol type="1"><li><p>申请MongoDB账号（<a href="https://www.mongodb.com/zh-cn">MongoDB：应用程序数据平台 |MongoDB</a>）</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230811124738057.png" alt="image-20230811124738057"></p></li><li><p>创建免费 MongoDB 数据库，区域推荐选择<code>AWS / N. Virginia (us-east-1)</code></p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230811125436976.png" alt="image-20230811125436976"></p><ul><li>点击Create创建deployment</li></ul><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230811142520047.png" alt="image-20230811142520047"></p><ul><li>选择数据库（如需免费请选择M0），服务提供商选择亚马逊云，地区选择N.Virginia(us-east-1)</li></ul><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230811142728438.png" alt="image-20230811142728438"></p><ul><li>设置用户名和密码</li></ul><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230811143059729.png" alt="image-20230811143059729"></p><ul><li>选择云环境，并设置ip白名单，如果要全公网可访问设置ip白名单为0.0.0.0/0</li></ul><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230811143311162.png" alt="image-20230811143311162"></p><ul><li>出现Congratulations字样！离成功又近了！</li></ul><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230811143418916.png" alt="image-20230811143418916"></p><ul><li>点击Connect连接，复制连接参数</li></ul><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230811143647250.png" alt="image-20230811143647250"></p><ul><li>使用工具测试连接成功（DataGrip、Navicat、或者MangoDB forvscode等工具都可以）</li></ul><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230811144134973.png" alt="image-20230811144134855"></p></li><li><p>在 Clusters 页面点击 CONNECT，按步骤设置允许所有 IP地址的连接（<a href="https://vercel.com/support/articles/how-to-allowlist-deployment-ip-address">为什么？openin newwindow</a>），创建数据库用户，并记录数据库连接字符串，请将连接字符串中的`&lt;password&gt;` 修改为数据库密码</p></li><li><p>申请 <a href="https://vercel.com/signup">Vercel</a> 账号</p></li><li><p>点击以下按钮将 Twikoo 一键部署到 Vercel <a href="https://vercel.com/import/project?template=https://github.com/imaegoo/twikoo/tree/main/src/server/vercel-min"><img src="https://vercel.com/button" alt="img"></a></p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230811125154158.png" alt="image-20230811125154158"></p></li><li><p>进入 Settings - Environment Variables，添加环境变量<code>MONGODB_URI</code>，值为第 3 步的数据库连接字符串</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230811151707503.png" alt="image-20230811151707503"></p></li><li><p>进入 Deployments , 然后在任意一项后面点击更多（三个点） ,然后点击Redeploy , 最后点击下面的Redeploy</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230811145857600.png" alt="image-20230811145857600"></p></li><li><p>进入 Overview，点击 Domains下方的链接，如果环境配置正确，可以看到 “Twikoo 云函数运行正常”的提示</p><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230811150336432.png" alt="image-20230811150336432"></p></li><li><p>Vercel Domains（包含 <code>https://</code> 前缀，例如<code>https://xxx.vercel.app</code>）即为您的环境 id</p></li><li><p>复制后配置到博客twikoo配置项中，主要配置环境id即可</p></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;code&gt;注意 Vercel 部署的环境需配合 1.4.0 以上版本的 twikoo.js 使用 默认域名 *.vercel.app 在中国大陆访问速度较慢甚至无法访问，绑定自己的域名可以提高访问速度&lt;/code&gt;&lt;/p&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;&lt;p&gt;申请M</summary>
      
    
    
    
    <category term="技术分享" scheme="https://www.junpengzhou.top/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="建站经验" scheme="https://www.junpengzhou.top/tags/%E5%BB%BA%E7%AB%99%E7%BB%8F%E9%AA%8C/"/>
    
  </entry>
  
  <entry>
    <title>如何在页面中嵌入51LA统计的数据统计插件</title>
    <link href="https://www.junpengzhou.top/article/aff50f08.html"/>
    <id>https://www.junpengzhou.top/article/aff50f08.html</id>
    <published>2023-08-09T03:21:37.000Z</published>
    <updated>2024-08-14T04:18:18.605Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一前提说明">一、前提说明</h1><ul><li>51LA账号</li><li>有自己的统计应用并记住自己的ck和id</li><li>参数设置==&gt;基础信息已填写正确的绑定域名</li></ul><h1 id="二操作步骤">二、操作步骤</h1><ol type="1"><li>开启数据挂件功能</li></ol><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230809112149566.png" alt="image-20230809112149566"></p><ol start="2" type="1"><li>开启后请耐心等待5分钟，未到点打开代码中的<code>src</code>会出现下列错误：</li></ol><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230809112544008.png" alt="image-20230809112544008"></p><ol start="3" type="1"><li>嵌入到网页中进行使用（数据显示正常）</li></ol><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230809113122927.png" alt="image-20230809113122927"></p><ol start="4" type="1"><li><p><strong>设置完成，请更换最新的嵌入代码</strong></p><ul><li>为了您的数据挂件能被正常使用，请确认 基础信息中已正确填写域名配置。</li><li>**启用数据挂件功能后，需要大约 5分钟时间完成挂件创建，请耐心等待挂件生成。**在此期间您可将嵌入代码放置在您网站中任何想要展示站点数据的位置中。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script id=<span class="string">"LA-DATA-WIDGET"</span> crossorigin=<span class="string">"anonymous"</span> charset=<span class="string">"UTF-8"</span> src=<span class="string">"https://v6-widget.51.la/v6/3FWN3ZXqo0a6Z2Ev/quote.js?theme=0&amp;col=true&amp;f=12&amp;badge=icon_0&amp;icon=center"</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;一前提说明&quot;&gt;一、前提说明&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;51LA账号&lt;/li&gt;
&lt;li&gt;有自己的统计应用并记住自己的ck和id&lt;/li&gt;
&lt;li&gt;参数设置==&amp;gt;基础信息已填写正确的绑定域名&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;二操作步骤&quot;&gt;二、操作步骤&lt;/</summary>
      
    
    
    
    <category term="技术分享" scheme="https://www.junpengzhou.top/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="建站经验" scheme="https://www.junpengzhou.top/tags/%E5%BB%BA%E7%AB%99%E7%BB%8F%E9%AA%8C/"/>
    
  </entry>
  
  <entry>
    <title>Typora+腾讯云COS+PicGo进行自动上传文章图片到图床</title>
    <link href="https://www.junpengzhou.top/article/4defb0f4.html"/>
    <id>https://www.junpengzhou.top/article/4defb0f4.html</id>
    <published>2023-08-01T08:49:24.000Z</published>
    <updated>2024-08-14T04:18:18.605Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一工具清单">一、工具清单</h1><ul><li>Typora</li><li>腾讯COS（对象存储服务）</li><li>PicGo</li></ul><h1 id="二操作步骤">二、操作步骤</h1><ol type="1"><li>点击最右上角的头像选择访问管理</li></ol><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230801165131706.png" alt="image-20230801165131706"></p><ol start="2" type="1"><li>新建一个客户端秘钥，使得PicGo客户端在此授权下的权限和授权时间内，可以进行上传图片的操作</li></ol><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230801165343294.png" alt="image-20230801165343294"></p><ol start="2" type="1"><li>配置PicGo，填入腾讯COS上相关的秘钥参数和桶基础参数</li></ol><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230801165920178.png" alt="image-20230801165920178"></p><ol start="3" type="1"><li>进入Typora ==&gt; 文件 ==&gt; 偏好设置 ==&gt;图像中设置插入图片时候的自动上传动作和指定PicGo.exe程序位置，并在完成设置后可以验证图片上传选项</li></ol><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230801165606337.png" alt="image-20230801165606337"></p><ol start="4" type="1"><li>配置完成后上传后测试（桶内会多出文件来）</li></ol><p><img src="https://junpengzhou-1305658609.cos.ap-nanjing.myqcloud.com/blog/image-20230801165031976.png" alt="image-20230801165031976"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;一工具清单&quot;&gt;一、工具清单&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Typora&lt;/li&gt;
&lt;li&gt;腾讯COS（对象存储服务）&lt;/li&gt;
&lt;li&gt;PicGo&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;二操作步骤&quot;&gt;二、操作步骤&lt;/h1&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;点击最</summary>
      
    
    
    
    <category term="技术分享" scheme="https://www.junpengzhou.top/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="建站经验" scheme="https://www.junpengzhou.top/tags/%E5%BB%BA%E7%AB%99%E7%BB%8F%E9%AA%8C/"/>
    
  </entry>
  
  <entry>
    <title>如何在GitAction中获取子模块最新代码</title>
    <link href="https://www.junpengzhou.top/article/67e7adac.html"/>
    <id>https://www.junpengzhou.top/article/67e7adac.html</id>
    <published>2023-08-01T03:38:01.000Z</published>
    <updated>2024-08-14T04:18:18.605Z</updated>
    
    <content type="html"><![CDATA[<h2 id="alternatives">Alternatives</h2><ul><li>You can use the <code>submodules</code> input to the checkoutaction:<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">steps:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">repository</span> <span class="string">and</span> <span class="string">submodules</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">submodules:</span> <span class="string">recursive</span></span><br></pre></td></tr></table></figure></li><li>another way, you can just run the command directly:<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">steps:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">repository</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">submodules</span></span><br><span class="line">  <span class="attr">run:</span> <span class="string">git</span> <span class="string">submodule</span> <span class="string">update</span> <span class="string">--init</span> <span class="string">--recursive</span></span><br></pre></td></tr></table></figure></li><li>or use git command with <a href="https://github.com/marketplace/actions/git-actions">git-actionplugin</a> instead:<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">steps:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">repository</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">submodules</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">srt32/git-actions@v0.0.3</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">args:</span> <span class="string">git</span> <span class="string">submodule</span> <span class="string">update</span> <span class="string">--init</span> <span class="string">--recursive</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="git-submodule-切换分支的代码">Git submodule 切换分支的代码</h2><ul><li>切换分支语法</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config -f .gitmodules submodule.xxx.branch xxx1</span><br></pre></td></tr></table></figure><ul><li>示例</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config -f .gitmodules submodule.themes/anzhiyu.branch dev</span><br></pre></td></tr></table></figure><p><strong>将<code>xxx</code>替换成对应的子模块名称(可在<code>.gitmodules</code>文件中查看到)，<code>xxx1</code>替换成子模块需要的目标分支</strong></p><blockquote><p>原文链接：<a href="https://github.com/marketplace/actions/checkout-submodules">https://github.com/marketplace/actions/checkout-submodules</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;alternatives&quot;&gt;Alternatives&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;You can use the &lt;code&gt;submodules&lt;/code&gt; input to the checkout
action:
&lt;figure class=&quot;highli</summary>
      
    
    
    
    <category term="技术分享" scheme="https://www.junpengzhou.top/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="源代码管理" scheme="https://www.junpengzhou.top/tags/%E6%BA%90%E4%BB%A3%E7%A0%81%E7%AE%A1%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>每日早报</title>
    <link href="https://www.junpengzhou.top/article/89eb1b81.html"/>
    <id>https://www.junpengzhou.top/article/89eb1b81.html</id>
    <published>2023-05-19T09:23:21.000Z</published>
    <updated>2024-08-14T04:18:18.605Z</updated>
    
    <content type="html"><![CDATA[<h1 id="每日60秒新闻">每日60秒新闻</h1><p><strong>来看看一觉醒来都发生了什么？</strong> <img src="https://v2.alapi.cn/api/zaobao?token=BX2vvKW28gktjrPr&amp;format=image"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;每日60秒新闻&quot;&gt;每日60秒新闻&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;来看看一觉醒来都发生了什么？&lt;/strong&gt; &lt;img src=&quot;https://v2.alapi.cn/api/zaobao?token=BX2vvKW28gktjrPr&amp;amp;format=</summary>
      
    
    
    
    <category term="日常分享" scheme="https://www.junpengzhou.top/categories/%E6%97%A5%E5%B8%B8%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="日常见闻" scheme="https://www.junpengzhou.top/tags/%E6%97%A5%E5%B8%B8%E8%A7%81%E9%97%BB/"/>
    
  </entry>
  
</feed>
